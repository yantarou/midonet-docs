<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:exsl="http://exslt.org/common" xmlns:ng="http://docbook.org/docbook-ng" xmlns:fb="http://ogp.me/ns/fb#"><head>
<link href="https://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet"/>
<title>Troubleshooting VTEP/VXGW configuration - MidoNet Operation Guide
   - 2015.03-rev1</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"/><meta name="mavenGroupId" content="org.midonet"/><meta name="mavenArtifactId" content="midonet-docs-operation-guide-en"/><meta name="mavenVersionId" content="2015.03-rev1"/><link rel="home" href="index.html" title="MidoNet Operation Guide"/><link rel="up" href="vxlan_configuration.html" title="Chapter 14. VXLAN configuration"/><link rel="prev" href="connect_vtep_to_midonet.html" title="Enabling connection between VTEP and MidoNet hosts"/><link rel="next" href="vxlan_cli_commands.html" title="CLI commands used for working with the VXGW"/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="git-sha" content="0dc04ca03c7e6c2af13c870f411d92ad058d31e2"/><meta name="buildTime" content="2015-05-11T16:00:48+09:00"/><script type="text/javascript">
            //The id for tree cookie
            var treeCookieId = "treeview-book_operation_guide_en";
            var language = "en";
            var w = new Object();
            //Localization
            txt_filesfound = 'Results';
            txt_enter_at_least_1_char = "You must enter at least one character.";
            txt_browser_not_supported = "Please enable JavaScript.";
            txt_please_wait = "Please wait. Search in progress...";
            txt_results_for = "Results for: ";
        </script><style type="text/css">
            input {
            margin-bottom: 5px;
            margin-top: 2px;
            }

            .folder {
            display: block;
            height: 22px;
            padding-left: 20px;
            background: transparent url(../common/jquery/treeview/images/folder.gif) 0 0px no-repeat;
            }
            
        </style><link rel="shortcut icon" href="../favicon.ico" type="image/x-icon"/><link rel="stylesheet" type="text/css" href="../common/css/positioning.css"/><link rel="stylesheet" type="text/css" href="../common/css/custom.css"/><!--[if IE]>
	<link rel="stylesheet" type="text/css" href="../common/css/ie.css"/>
	<![endif]--><link rel="stylesheet" type="text/css" href="../common/jquery/theme-redmond/jquery-ui-1.8.2.custom.css"/><link rel="stylesheet" type="text/css" href="../common/jquery/treeview/jquery.treeview.css"/><script type="text/javascript" src="http://code.jquery.com/jquery-1.11.0.min.js"><!----></script><script type="text/javascript" src="../common/jquery/jquery-ui-1.8.2.custom.min.js"><!----></script><script type="text/javascript" src="../common/jquery/jquery.cookie.js"><!----></script><script type="text/javascript" src="../common/jquery/treeview/jquery.treeview.min.js"><!----></script><link rel="stylesheet" type="text/css" href="http://cdn.jsdelivr.net/qtip2/2.2.0/jquery.qtip.min.css"/><script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/qtip2/2.2.0/jquery.qtip.min.js"><!--jQuery plugin for glossary popups. --></script><script type="text/javascript" src="search/htmlFileList.js"><!----></script><script type="text/javascript" src="search/htmlFileInfoList.js"><!----></script><script type="text/javascript" src="search/nwSearchFnt.js"><!----></script><script type="text/javascript" src="search/stemmers/en_stemmer.js"><!--//make this scalable to other languages as well.--></script><script type="text/javascript" src="search/index-1.js"><!----></script><script type="text/javascript" src="search/index-2.js"><!----></script><script type="text/javascript" src="search/index-3.js"><!----></script><script type="text/javascript">
	    var _gaq = _gaq || [];
	    _gaq.push(['_setAccount', 'UA-56283377-4']);
	    
	    _gaq.push(['_setDomainName', '.midonet.org']);	        
	        </script><script type="text/javascript" src="../common/ga.js"><!----></script></head><body><div id="header"><a onclick="_gaq.push(['_trackEvent', 'Header', 'logo', 'click', 1]);" target="_blank" href="http://www.midonet.org"><img src="../common/images/midonet-logo.png" alt="MidoNet Documentation" width="157" height="47"/></a><h1>Troubleshooting VTEP/VXGW configuration</h1><div id="navheader" align="right"><!----><table class="navLinks"><tr><td><a id="showHideButton" onclick="showHideToc(); _gaq.push(['_trackEvent', 'Header', 'show/hide', 'click', 1]);" class="pointLeft" title="Hide TOC tree">Sidebar
                            </a></td><td><a accesskey="p" class="navLinkPrevious" onclick="_gaq.push(['_trackEvent', 'Header', 'prevLink', 'click', 1]);" tabindex="5" href="connect_vtep_to_midonet.html">Prev</a>
				      |
                                        <a accesskey="u" class="navLinkUp" onclick="_gaq.push(['_trackEvent', 'Header', 'upLink', 'click', 1]);" tabindex="5" href="vxlan_configuration.html">Up</a>
				  |
                                    <a accesskey="n" class="navLinkNext" onclick="_gaq.push(['_trackEvent', 'Header', 'nextLink', 'click', 1]);" tabindex="5" href="vxlan_cli_commands.html">Next</a></td></tr></table></div></div><div id="toolbar" class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"><div id="toolbar-left"><p class="breadcrumbs"><a href="http://docs.midonet.org/">MidoNet Manuals</a><a href="index.html">MidoNet Operation Guide
   - 2015.03-rev1</a></p><a onclick="_gaq.push(['_trackEvent', 'Header', 'pdfDownload', 'click', 1]);" alt="Download a pdf of this document" class="pdficon" href="../MidoNet_Operation_Guide_EN_2015.03-rev1.pdf"><img src="../common/images/pdf.png"/></a><div id="gplusone"><a id="AskOOLink1" href="http://wiki.midonet.org/Mailing%20lists%20and%20IRC" target="_blank" title="Questions? Discuss on Mailing Lists or Chat."><i class="icon-question"><!----></i></a>  
        <a id="logABugLink1" href="https://midonet.atlassian.net/browse/MND/" target="_blank" title="Found an error? Report a bug."><i class="icon-bug"><!----></i></a></div></div></div><div id="content"><div class="section"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="vxgw_troubleshooting"> </a>Troubleshooting VTEP/VXGW configuration</h2></div></div></div><p>VTEP deployments have a relatively large number of moving pieces and
potential failure points.  This guide will focus on troubleshooting
MidoNet and the integration with the VTEP.  For specifics on the
configuration of the logical switch please refer to your vendor’s
documentation.</p><p><span class="strong"><strong>Is the MidoNet API able to connect to the VTEP</strong></span></p><p>After following the procedure to add a VTEP as described in <a class="xref" href="cli_add_vtep.html" title="Adding a VTEP">the section called “Adding a VTEP”</a>,
the expected output should be as follows:</p><pre class="screen">midonet&gt; vtep add management-ip 119.15.120.123 management-port 6633 tunnel-zone tzone0
management-ip 119.15.120.123 management-port 6633 tunnel-zone tzone0 connection-state CONNECTED</pre><p>The same output should appear for VTEPs already added to MidoNet.</p><p>Note that the state is CONNECTED.  An ERROR state will indicate that the
VTEP’s management IP is unreachable from the MidoNet API.</p><p><span class="strong"><strong>Is the VTEP well configured?</strong></span></p><p>A typical reason for the VTEP being on ERROR state is a misconfiguration
of the VTEP OVDSB instance. You can verify this by executing the
following command on the console:</p><pre class="screen">ovsdb-client dump hardware_vtep</pre><p>Scroll down to the Physical_Switch table, which will look like this:</p><pre class="screen">Physical_Switch table
_uuid                                description         management_ips   name        ports                                  switch_fault_status tunnel_ips
------------------------------------ ------------------- ---------------- ----------- -------------------------------------- ------------------- ------------
3647f020-9ecf-4854-8f75-9011b8c9996a "VTEP DESCRIPTION"  ["192.168.2.14"] "VTEP NAME" [698ede89-31f8-4797-a885-1b2dd4c585e3] []                  ["10.0.0.1"]</pre><p>Verify that an entry exists, and the management_ips and tunnel_ips
fields correspond to the physical configuration.  The management IP is
the one you’ll be using on the "vtep add" command. The tunnel IP is not
relevant at this point, however, MidoNet expects that a value is present
in this field.</p><p><span class="strong"><strong>Is the OVSDB instance running and accessible?</strong></span></p><p>If the MidoNet API shows an ERROR on the VTEP list, and your
configuration is correct, you should verify that the OVSDB instance is
listening on the same management-port that you’re specifying in the vtep
add call.</p><p>From the host running the MidoNet REST API (and Coordinator) try to
establish a Telnet connection to the VTEP management interface IP and
port, assuming these are 192.168.2.13 and 6632:</p><pre class="screen">telnet 192.168.2.13 6632</pre><p>If the connection is successful, you should see the following output:</p><pre class="screen">Trying 192.168.2.13..
Connected to localhost.
Escape character is '^]'.</pre><p>This means that we have a TCP socket listening on the right port.
We can now verify that the OVSDB is responsive.  If this is not the
case, then check your switch manual to listen for connections at the
selected TCP port.</p><p>If the output was correct, then enter the following input into the
console:</p><pre class="screen">{"method":"list_dbs","id":"list_dbs","params":[]}</pre><p>The desired output is:</p><pre class="screen">{"id":"list_dbs","result":["hardware_vtep"],"error":null}</pre><p>The content of the brackets after "result" may vary, but we must see a
"hardware_vtep", indicating that there is a VTEP schema on this instance
of the OVSDB. If you fail to see this output, the VTEP likely doesn’t
contain a hardware_vtep schema in its OVSDB instance.  Refer to your
switch documentation for instructions to configure it.</p><p><span class="strong"><strong>VTEP and bindings are added but no traffic goes through</strong></span></p><p>Verify first that you enabled the VxLAN Gateway Service in the MidoNet
API.  This service is not enabled by default, but is required to
configure the VTEP and synchronize state.  Open the MidoNet API
configuration file:</p><pre class="screen">vi /usr/share/midonet-api/WEB-INF/web.xml</pre><p>And scroll down until you find this section:</p><pre class="screen">&lt;!-- VXLAN gateway configuration --&gt;
&lt;context-param&gt;
    &lt;param-name&gt;midobrain-vxgw_enabled&lt;/param-name&gt;
    &lt;param-value&gt;true&lt;/param-value&gt;
&lt;/context-param&gt;</pre><p>Note that the value is set to "true" in all MidoNet API instances that
you want to participate in VxLAN Gateway coordination.</p><p><span class="strong"><strong>Verify that the VxLAN Gateway service is started</strong></span></p><p>The VxLAN Gateway service may be enabled in several MidoNet API
instances.  All of them will coordinate through the Network State
Database (NSDB) to elect a leader that will perform all coordination
tasks. When a MidoNet API instance takes over leadership the following
INFO message is displayed in the logs (/var/log/tomcat/catalina.out):</p><pre class="screen">"I am the VxLAN Gateway leader! \o/"</pre><p>If another instance is already a leader, all other instances will
display the following INFO message:</p><pre class="screen">"I am no longer VxLAN Gateway leader, going passive"</pre><p>At least one instance of the MidoNet API should display the positive
message indicating that it became the VxLAN Gateway Leader.  This is the
instance that should be watched for further log messages.</p><p><span class="strong"><strong>Verify that the VxLAN Gateway leader picks up VTEPs and Networks</strong></span></p><p>VxLAN Gateway services will scan all the Neutron networks in MidoNet’s
NSDB and proceed to monitor those that are bound to any VTEPs.</p><p>Whenever a Neutron network is bound to a VTEP, the following message
will appear in the INFO logs.  Note that all log messages relevant for a
given Neutron network will be tagged with the appropriate UUID:</p><pre class="screen">INFO c68fa502-62e5-4b33-9f2f-d5d0257deb4f - Successfully processed update</pre><p>You can filter updates relevant to specific networks by editing:</p><pre class="screen">vi /usr/share/midonet-api/WEB-INF/classes/logback.xml</pre><p>Follow the instructions detailed in this file to enable different
processes in the coordinator.  For brevity, log messages mentioned
below will omit the Network UUID tag.</p><p>As mentioned above, you should be seeing a message like the following
for each Neutron network:</p><pre class="screen">Network &lt;NETWORK_UUID&gt; is now part of a VxLAN Gateway</pre><p>Failures during this phase typically indicate errors accessing the
NSDB, for example:</p><pre class="screen">Cannot retrieve network state</pre><p>The MidoNet controller will WARN in the logs whenever a recoverable
error is found, and try to restore connectivity to the NSDB.  Non
recoverable errors will be marked as ERROR.</p><p>If the logs show problems connecting to the NSDB verify that the NSDB is
active, and MidoNet API is successfully able to access it.</p><p><span class="strong"><strong>Verify that the MidoNet coordinator synchronizes MAC with the VTEPs</strong></span></p><p>After fetching Neutron network configuration from the NDSB, the MidoNet
API logs should display the following messages (note that they may
appear mixed with other messages):</p><pre class="screen">Starting to watch MAC-Port table in &lt;NEUTRON_UUID&gt;
Starting to watch ARP table in &lt;NEUTRON_UUID&gt;
Network state now monitored</pre><p>These indicate that the MidoNet coordinator is monitoring the network’s
state, which will be synchronized to the VTEP.</p><p><span class="strong"><strong>Verify that the MidoNet coordinator connects to the VTEP(s)</strong></span></p><p>The MidoNet coordinator will also bootstrap a process to exchange state
among the network, and all VTEPs with port-vlan pairs bound to it.  When
the controller detects any port-vlan pair in a new VTEP, it’ll show the
following message (assuming management ip and management port are
192.168.2.13 and 6632):</p><pre class="screen">Bindings to new VTEP at 192.168.2.13:6632</pre><p>At this point it will ensure that a connection is stablished to this
VTEP’s management IP and that the bindings configured through the
MidoNet REST API are correctly reflected in the VTEP.  Normal output will
look like this (note that they may appear mixed with other messages):</p><pre class="screen">Consolidate state into OVSDB for &lt;VXLAN GATEWAY DESCRIPTION&gt;
Logical switch &lt;LOGICAL_SWITCH_NAME&gt; exists: ..
Syncing port/vlan bindings: &lt;PORT_VLAN PAIRS&gt;</pre><p>If the coordinator reports any errors connecting to the VTEP it will
automatically try to connect, but you should verify that the VTEP is
up and accessible.</p><p>Following a successful consolidation of state, MidoNet will start the
synchronization of MACs and ARP entries:</p><pre class="screen">Joining &lt;VXLAN_GATEWAY_DESCRIPTION&gt; and pre seeding &lt;NUMBER&gt; remote MACs
Emitting snapshot with &lt;NUMBER&gt; local MACs
Advertise unknown-dst to receive flooded traffic ..</pre><p>Connection errors to the VTEP are possible at this point, but should be
handled gracefully by the coordinator.</p><p>If MidoNet finds a non recoverable error, the following WARN will be
displayed (assuming same management port and id as above):</p><pre class="screen">Failed to bootstrap VTEP at 192.168.2.13:6632</pre><p>The MidoNet coordinator will ignore this Neutron network until it’s
updated again.  It should however be able to continue operating with all
other configured networks.</p><p><span class="strong"><strong>Verify that the MidoNet coordinator synchronizes state</strong></span></p><p>If no errors are displayed up to here, edit the logback.xml file
mentioned above and enable DEBUG logs in the vxgw processes:</p><pre class="screen">&lt;!-- &lt;logger name="org.midonet.vxgw" level="DEBUG" /&gt; --&gt;</pre><p>Remove the <code class="literal">&lt;!--</code> and <code class="literal">-→</code> tags to enable this configuration and wait for a
few seconds until the API logs start showing DEBUG messages.  Choose
TRACE instead of DEBUG for more exhaustive information (none will be too
verbose to have a significant performance impact).</p><p>Messages like the following show that the MidoNet coordinator is
successfully exchanging MACs among Midonet and VTEPs.</p><pre class="screen">TRACE c68fa502-62e5-4b33-9f2f-d5d0257deb4f - Learned: MacLocation { logicalSwitchName=mn-c68fa502-62e5-4b33-9f2f-d5d0257deb4f, mac=96:8f:e8:12:33:55, vxlanTunnelEndpoint=192.168.2.16 }</pre><p>This message indicates that an update about the given MAC was detected
on the Logical Switch that belongs to Neutron network
c68fa502-62e5-4b33-9f2f-d5d0257deb4f. In this case, the
vxlanTunnelEndpoint was 192.168.2.16, indicating that the MAC can be
found at that tunnel endpoint. The removal of a MAC from a port can be
identified because the vxlanTunnelEndpoint=null (that can be read as
"the MAC is at no port").</p><p><span class="strong"><strong>Verify that VxLAN tunnels are being established</strong></span></p><p>If the coordinator is working normally, but traffic is still not
flowing, you should verify that the VTEPs and MidoNet hosts are able to
stablish VxLAN tunnels successfully.</p><p>While keeping a ping active from the VM to the server you’re trying to
communicate with, log in to the MidoNet compute hosting the VM that you’re
trying to communicate with a server on the VTEP.  Run the following
command:</p><pre class="screen">tcpdump -leni any port 4789</pre><p>Assuming that the MidoNet compute is 192.168.2.14, and the VTEP’s tunnel
IP is 192.168.2.17, the output should be similar to this (depending on
your tcpdump version):</p><pre class="screen">15:51:28.183233 Out fa:16:3e:df:b7:53 ethertype IPv4 (0x0800), length 94: 192.168.2.14.39547 &gt; 192.168.2.17.4789: VXLAN, flags [I] (0x08), vni 10012
aa:aa:aa:aa:aa:aa &gt; ff:ff:ff:ff:ff:ff, ethertype ARP (0x0806), length 42: Request who-has 10.0.0.1 tell 10.0.0.10, length 28
15:51:28.186891  In fa:16:3e:52:d8:f3 ethertype IPv4 (0x0800), length 94: 192.168.2.17.59630 &gt; 192.168.2.13.4789: VXLAN, flags [I] (0x08), vni 10012
cc:dd:ee:ee:ee:ff &gt; aa:aa:aa:aa:aa:aa, ethertype ARP (0x0806), length 42: Reply 10.0.0.10 is-at cc:dd:ee:ee:ee:ff</pre><p>The first line shows that the MidoNet Agent (192.168.2.14) is emitting a
tunnelled packet towards the VTEP (192.168.2.17:4789), using 10012 as
VNID.  The encapsulated packet is shown on the second line, and
corresponds to an ARP REQUEST from a VM with ip 10.0.0.10 regarding
server 10.0.0.1.</p><p>In this example, the VTEP is responding correctly on the third line,
showing a return packet with the same VNID.</p><p>The same example can be applied in reverse on the VTEP. A ping from the
physical server connected to the VTEP should generate a tunnelled packet
towards a MidoNet Agent, and receive similar return packets.</p><p><span class="strong"><strong>The MidoNet agent is not emitting traffic</strong></span></p><p>Verify the VXLAN-related options in mn-conf(1).  Examine the MidoNet
Agent logs in debug mode and look for simulations on the Neutron network
that might be dropping packets, or throwing errors on the simulation.</p><p><span class="strong"><strong>The VTEP is not emitting traffic on the tunnel</strong></span></p><p>Ensure that the VTEP configuration reflects the bindings configured
throught the MidoNet REST API.  Use the following command to list the
VTEPs present in the switch:</p><pre class="screen">vtep-ctl list-ls</pre><p>This will display all Logical Switches present in the switch.  If you
bound a Neutron network with UUID c68fa502-62e5-4b33-9f2f-d5d0257deb4f,
then you should see the following item in the list:</p><pre class="screen">mn-c68fa502-62e5-4b33-9f2f-d5d0257deb4f</pre><p>Now list the bindings on the port that you used to create the port-vlan
binding in the midonet-cli.  Let’s assume we have port1, and created a
binding with port1 and vlan 93.  The expected output would be:</p><pre class="screen">vtep-ctl list-bindings &lt;VTEP_NAME&gt; port1
0093 mn-c68fa502-62e5-4b33-9f2f-d5d0257deb4f</pre><p>You can find out the VTEP_NAME using the "vtep-ctl list-ps" command.</p><p>If any of these outputs is not as expected, the MidoNet coordinator is
most likely not being able to consolidate the configuration from the
NSDB.  Verify the MidoNet API logs and locate the relevant errors in
order to correct them.</p><p><span class="strong"><strong>Verify that MACs are being synchronized correctly to the VTEP</strong></span></p><p>Finally, you can list the local and remote MACs present in the VTEP’s
database:</p><pre class="screen">vtep-ctl list-local-macs mn-c68fa502-62e5-4b33-9f2f-d5d0257deb4f</pre><p>This should show all the MACs learned by the VTEP from traffic observed
on local ports.  If the local server is correctly configured, you will
typically see the server’s MAC here.</p><p>The following command will display the remote MACs:</p><pre class="screen">vtep-ctl list-remote-macs mn-c68fa502-62e5-4b33-9f2f-d5d0257deb4f</pre><p>The list here will show MACs in MidoNet VMs or other VTEPs, which are
injected by the MidoNet coordinator.</p><p>If any of these steps don’t show an expected output, the synchronisation
processes may be failing.  Inspect the MidoNet API logs for more
details.</p></div><script type="text/javascript" src="../common/main.js"><!----></script><div class="logabug" style="text-align: center"><a id="AskOOLink2" href="http://wiki.midonet.org/Mailing%20lists%20and%20IRC" target="_blank"><i class="icon-question"><!----></i>Questions? Discuss on Mailing Lists or Chat.</a><br/><a id="logABugLink2" href="https://midonet.atlassian.net/browse/MND/" target="_blank"><i class="icon-bug"><!----></i>Found an error? Report a bug.</a></div><hr/><div id="disqus_thread"><script type="text/javascript">
	      if(window.location.protocol.substring(0,4) == 'http'){
	        var disqus_shortname = 'midonet';
	      
	        var disqus_identifier = 'book_operation_guide_en2015.03-rev1vxgw_troubleshooting';
	      
	      }
	    </script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><script type="text/javascript" src="../common/comments.js"><!----></script></div><hr/><div class="legal"><a href="index.html">Legal notices</a></div></div><div><div id="leftnavigation" style="padding-top:3px; background-color:white;"><div id="tabs"><ul><li><a href="#treeDiv" tabindex="1"><span class="contentsTab">Contents</span></a></li><li><a href="#searchDiv" tabindex="1"><span class="searchTab">Search</span></a></li></ul><div id="treeDiv"><img src="../common/images/loading.gif" alt="loading table of contents..." id="tocLoading" style="display:block;"/><div id="ulTreeDiv" style="display:none" class="thisisthat"><ul id="tree" class="filetree"><li tabindex="2"><span class="file"><a href="preface.html">Preface</a></span><ul><li tabindex="2"><span class="file"><a href="preface.html#_conventions">Conventions</a></span><ul><li tabindex="2"><span class="file"><a href="preface.html#_notices">Notices</a></span></li><li tabindex="2"><span class="file"><a href="preface.html#_command_prompts">Command prompts</a></span></li></ul></li></ul></li><li tabindex="2"><span class="file"><a href="configuring_uplinks.html">1. Configuring uplinks</a></span><ul><li tabindex="2"><span class="file"><a href="bgp_setup.html">BGP Setup</a></span><ul><li tabindex="2"><span class="file"><a href="establish_bgp_session.html">Establishing a BGP session</a></span></li><li tabindex="2"><span class="file"><a href="bgp_failover.html">BGP failover configuration on a BGP peer</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="static_setup.html">Static Setup</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="authentication_and_authorization.html">2. Authentication and authorization</a></span><ul><li tabindex="2"><span class="file"><a href="authentication_services.html">Available authentication services in MidoNet</a></span><ul><li tabindex="2"><span class="file"><a href="authentication_services.html#_keystone_specific_configurations">Keystone-specific configurations</a></span></li><li tabindex="2"><span class="file"><a href="authentication_services.html#_about_mock_authentication">About mock authentication</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="authentication_roles.html">Roles in MidoNet</a></span><ul><li tabindex="2"><span class="file"><a href="authentication_roles.html#_creating_admin_roles_for_midonet">Creating admin roles for MidoNet</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="keystone_authentication.html">Using the Keystone authentication service</a></span><ul><li tabindex="2"><span class="file"><a href="enabling_keystone_authentication.html">Enabling Keystone authentication</a></span><ul><li tabindex="2"><span class="file"><a href="enabling_keystone_authentication.html#_auth_auth_provider">auth-auth_provider</a></span></li><li tabindex="2"><span class="file"><a href="enabling_keystone_authentication.html#_keystone_service_protocol">keystone-service_protocol</a></span></li><li tabindex="2"><span class="file"><a href="enabling_keystone_authentication.html#_keystone_service_host">keystone-service_host</a></span></li><li tabindex="2"><span class="file"><a href="enabling_keystone_authentication.html#_keystone_service_port">keystone-service_port</a></span></li><li tabindex="2"><span class="file"><a href="enabling_keystone_authentication.html#_keystone_admin_token">keystone-admin_token</a></span></li><li tabindex="2"><span class="file"><a href="enabling_keystone_authentication.html#_auth_admin_role">auth-admin_role</a></span></li><li tabindex="2"><span class="file"><a href="enabling_keystone_authentication.html#_keystone_tenant_name">keystone-tenant_name</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="disabling_keystone_authentication.html">Disabling Keystone authentication</a></span><ul><li tabindex="2"><span class="file"><a href="disabling_keystone_authentication.html#_auth_auth_provider_2">auth-auth_provider</a></span></li><li tabindex="2"><span class="file"><a href="disabling_keystone_authentication.html#_mock_auth_admin_token">mock_auth-admin_token</a></span></li><li tabindex="2"><span class="file"><a href="disabling_keystone_authentication.html#_mock_auth_tenant_admin_token">mock_auth-tenant_admin_token</a></span></li><li tabindex="2"><span class="file"><a href="disabling_keystone_authentication.html#_mock_auth_tenant_user_token">mock_auth-tenant_user_token</a></span></li></ul></li></ul></li></ul></li><li tabindex="2"><span class="file"><a href="admitting_resources.html">3. Admitting resources to MidoNet</a></span><ul><li tabindex="2"><span class="file"><a href="tunnel_zones.html">What are tunnel zones?</a></span><ul><li tabindex="2"><span class="file"><a href="_creating_tunnel_zones.html">Creating tunnel zones</a></span></li><li tabindex="2"><span class="file"><a href="deleting_tunnel_zones.html">Deleting tunnel zones</a></span></li><li tabindex="2"><span class="file"><a href="viewing_tunnel_zone_information.html">Viewing tunnel zone information</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="working_with_hosts.html">Working with hosts</a></span><ul><li tabindex="2"><span class="file"><a href="viewing_host_information.html">Viewing host information</a></span></li><li tabindex="2"><span class="file"><a href="admitting_a_host.html">Admitting a host</a></span></li><li tabindex="2"><span class="file"><a href="removing_a_host_from_a_tunnel_zone.html">Removing a host from a tunnel zone</a></span></li><li tabindex="2"><span class="file"><a href="removing_a_host.html">Removing a host</a></span></li></ul></li></ul></li><li tabindex="2"><span class="file"><a href="device_abstractions.html">4. Device abstractions</a></span><ul><li tabindex="2"><span class="file"><a href="creating_a_router.html">Creating a router</a></span></li><li tabindex="2"><span class="file"><a href="adding_a_port_to_a_router.html">Adding a port to a router</a></span></li><li tabindex="2"><span class="file"><a href="adding_a_bridge.html">Adding a bridge</a></span></li><li tabindex="2"><span class="file"><a href="adding_a_port_to_a_bridge.html">Adding a port to a bridge</a></span></li><li tabindex="2"><span class="file"><a href="binding_an_exterior_port_to_a_host.html">Binding an exterior port to a host</a></span></li><li tabindex="2"><span class="file"><a href="stateful_port_groups.html">Stateful port groups</a></span><ul><li tabindex="2"><span class="file"><a href="_creating_stateful_port_groups.html">Creating stateful port groups</a></span></li></ul></li></ul></li><li tabindex="2"><span class="file"><a href="connecting_devices.html">5. Connecting devices</a></span><ul><li tabindex="2"><span class="file"><a href="concept_i13_q4d_q4.html">Connecting a bridge to a router</a></span></li><li tabindex="2"><span class="file"><a href="concept_cpk_t4d_q4.html">Connecting two routers</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="routing.html">6. Routing</a></span><ul><li tabindex="2"><span class="file"><a href="routing_process_overview.html">Routing process overview</a></span><ul><li tabindex="2"><span class="file"><a href="routing_process_overview.html#_source">Source</a></span></li><li tabindex="2"><span class="file"><a href="routing_process_overview.html#_type">Type</a></span></li><li tabindex="2"><span class="file"><a href="routing_process_overview.html#_destination">Destination</a></span></li><li tabindex="2"><span class="file"><a href="routing_process_overview.html#_next_hop_gateway">Next Hop Gateway</a></span></li><li tabindex="2"><span class="file"><a href="routing_process_overview.html#_next_hop_port">Next Hop Port</a></span></li><li tabindex="2"><span class="file"><a href="routing_process_overview.html#_weight">Weight</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="viewing_routes.html">Viewing routes</a></span></li><li tabindex="2"><span class="file"><a href="concept_e3j_tpd_q4.html">Working with the Provider Router</a></span></li><li tabindex="2"><span class="file"><a href="adding_routes.html">Adding routes</a></span></li><li tabindex="2"><span class="file"><a href="deleting_routes.html">Deleting routes</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="rule_chains.html">7. Rule chains</a></span><ul><li tabindex="2"><span class="file"><a href="packet_flow_within_router.html">A packet’s flow within a router</a></span></li><li tabindex="2"><span class="file"><a href="packet_flow_within_rule_chain.html">A packet’s flow within a rule chain</a></span></li><li tabindex="2"><span class="file"><a href="rule_types.html">Rule types</a></span><ul><li tabindex="2"><span class="file"><a href="rule_types.html#_accept_drop_reject_return">ACCEPT, DROP, REJECT, RETURN</a></span></li><li tabindex="2"><span class="file"><a href="rule_types.html#_dnat_snat">DNAT, SNAT</a></span></li><li tabindex="2"><span class="file"><a href="rule_types.html#_rev_dnat_rev_snat">REV_DNAT, REV_SNAT</a></span></li><li tabindex="2"><span class="file"><a href="rule_types.html#_jump">Jump</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="rule_order.html">Rule order</a></span></li><li tabindex="2"><span class="file"><a href="rule_conditions.html">Rule conditions</a></span><ul><li tabindex="2"><span class="file"><a href="example_condition_1.html">Example condition 1</a></span></li><li tabindex="2"><span class="file"><a href="example_condition_2.html">Example condition 2</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="midonet_rule_chain_example.html">MidoNet rule chain example</a></span><ul><li tabindex="2"><span class="file"><a href="midonet_rule_chain_example.html#_assumptions">Assumptions</a></span></li><li tabindex="2"><span class="file"><a href="midonet_rule_chain_example.html#_listing_the_bridges_for_the_tenant">Listing the Bridges for the Tenant</a></span></li><li tabindex="2"><span class="file"><a href="midonet_rule_chain_example.html#_listing_the_ports_on_the_bridge">Listing the Ports on the Bridge</a></span></li><li tabindex="2"><span class="file"><a href="midonet_rule_chain_example.html#_listing_the_rules_for_the_inbound_chain_on_a_port">Listing the Rules for the Inbound Chain on a Port</a></span></li><li tabindex="2"><span class="file"><a href="midonet_rule_chain_example.html#_listing_the_openstack_security_group_rule_chain">Listing the OpenStack Security Group Rule Chain</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="listing_the_bridges_for_the_tenant.html">Listing the bridges for the tenant</a></span><ul><li tabindex="2"><span class="file"><a href="listing_the_bridges_for_the_tenant.html#_listing_the_ports_on_the_bridge_2">Listing the ports on the bridge</a></span></li><li tabindex="2"><span class="file"><a href="listing_the_bridges_for_the_tenant.html#_listing_the_rules_for_the_pre_routing_rule_chain">Listing the rules for the pre-routing rule chain</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="listing_the_openstack_security_group_rule_chain.html">Listing the OpenStack security group rule chain</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="network_address_translation.html">8. Network Address Translation</a></span><ul><li tabindex="2"><span class="file"><a href="static_nat.html">Static NAT</a></span><ul><li tabindex="2"><span class="file"><a href="static_nat.html#_assumptions_2">Assumptions</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="nat_rule_chains.html">Viewing NAT rule chain information</a></span><ul><li tabindex="2"><span class="file"><a href="nat_rule_chains.html#_assumptions_3">Assumptions</a></span></li><li tabindex="2"><span class="file"><a href="nat_rule_chains.html#_viewing_a_pre_routing_rule">Viewing a Pre-Routing rule</a></span></li><li tabindex="2"><span class="file"><a href="nat_rule_chains.html#_viewing_a_post_routing_rule">Viewing a Post-Routing rule</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="snat_dnat_revdnat.html">Configuring SNAT, DNAT, and REV_DNAT</a></span></li><li tabindex="2"><span class="file"><a href="dnat_revdnat_example.html">DNAT/REV_DNAT example</a></span></li><li tabindex="2"><span class="file"><a href="snat_example.html">SNAT example</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="l4lb.html">9. Layer 4 Load Balancing</a></span><ul><li tabindex="2"><span class="file"><a href="l4lb_configuration.html">Load balancer configuration</a></span></li><li tabindex="2"><span class="file"><a href="sticky_source_ip.html">Sticky source IP</a></span></li><li tabindex="2"><span class="file"><a href="health_monitor.html">Health monitor</a></span><ul><li tabindex="2"><span class="file"><a href="_haproxy_configuration.html">HAProxy configuration</a></span></li><li tabindex="2"><span class="file"><a href="_enabling_health_monitoring_in_a_pool.html">Enabling Health Monitoring in a Pool</a></span></li><li tabindex="2"><span class="file"><a href="_disabling_health_monitoring.html">Disabling Health Monitoring</a></span></li></ul></li></ul></li><li tabindex="2"><span class="file"><a href="l2_address_masking.html">10. L2 address masking</a></span><ul><li tabindex="2"><span class="file"><a href="rule_chain_example.html">L2 address mask rule chain example</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="handling_fragmented_packets.html">11. Handling fragmented packets</a></span><ul><li tabindex="2"><span class="file"><a href="handling_fragmented_packets.html#_definitions_and_allowed_values">Definitions and allowed values</a></span></li><li tabindex="2"><span class="file"><a href="handling_fragmented_packets.html#_fragmented_packets_rule_chain_creation_example">Fragmented packets rule chain creation example</a></span></li><li tabindex="2"><span class="file"><a href="handling_fragmented_packets.html#_non_fragmented_and_fragmented_packets">Non-Fragmented and Fragmented Packets</a></span></li><li tabindex="2"><span class="file"><a href="handling_fragmented_packets.html#_fragmented_and_non_fragmented_packets_with_different_destinations">Fragmented and Non-Fragmented Packets with Different Destinations</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="resource_protection.html">12. MidoNet resource protection</a></span><ul><li tabindex="2"><span class="file"><a href="resource_protection.html#_introduction">Introduction</a></span></li><li tabindex="2"><span class="file"><a href="resource_protection.html#_expected_behavior">Expected Behavior</a></span></li><li tabindex="2"><span class="file"><a href="resource_protection.html#_configuration">Configuration</a></span></li><li tabindex="2"><span class="file"><a href="resource_protection.html#_disabling_resource_protection">Disabling Resource Protection</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="monitoring.html">13. MidoNet monitoring</a></span><ul><li tabindex="2"><span class="file"><a href="metering.html">Metering</a></span><ul><li tabindex="2"><span class="file"><a href="metering.html#_overview">Overview</a></span></li><li tabindex="2"><span class="file"><a href="metering.html#_querying_meters">Querying meters</a></span></li><li tabindex="2"><span class="file"><a href="metering.html#_creating_a_custom_meter">Creating a custom meter</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="munin.html">Monitoring with Munin</a></span><ul><li tabindex="2"><span class="file"><a href="_configuring_munin.html">Configuring Munin</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="zabbix.html">Monitoring with Zabbix</a></span></li><li tabindex="2"><span class="file"><a href="nsdb.html">Monitoring Network State Database</a></span><ul><li tabindex="2"><span class="file"><a href="cassandra.html">Cassandra</a></span></li><li tabindex="2"><span class="file"><a href="zookeeper.html">ZooKeeper</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="midolman.html">Monitoring Midolman Agents</a></span></li><li tabindex="2"><span class="file"><a href="events.html">Monitoring events</a></span><ul><li tabindex="2"><span class="file"><a href="configuration.html">Configuration</a></span></li><li tabindex="2"><span class="file"><a href="log_file_locations.html">Event log files locations</a></span></li><li tabindex="2"><span class="file"><a href="message_format.html">Message format</a></span></li><li tabindex="2"><span class="file"><a href="message_categories.html">List of event messages</a></span><ul><li tabindex="2"><span class="file"><a href="topology_events.html">Virtual topology events</a></span><ul><li tabindex="2"><span class="file"><a href="topology_events.html#_router">Router</a></span></li><li tabindex="2"><span class="file"><a href="topology_events.html#_bridge">Bridge</a></span></li><li tabindex="2"><span class="file"><a href="topology_events.html#_port">Port</a></span></li><li tabindex="2"><span class="file"><a href="topology_events.html#_chain">Chain</a></span></li><li tabindex="2"><span class="file"><a href="topology_events.html#_rule">Rule</a></span></li><li tabindex="2"><span class="file"><a href="topology_events.html#_tunnel_zone">Tunnel Zone</a></span></li><li tabindex="2"><span class="file"><a href="topology_events.html#_bgp">BGP</a></span></li><li tabindex="2"><span class="file"><a href="topology_events.html#_loadbalancer">LoadBalancer</a></span></li><li tabindex="2"><span class="file"><a href="topology_events.html#_vip">VIP</a></span></li><li tabindex="2"><span class="file"><a href="topology_events.html#_pool">Pool</a></span></li><li tabindex="2"><span class="file"><a href="topology_events.html#_poolmember">PoolMember</a></span></li><li tabindex="2"><span class="file"><a href="topology_events.html#_healthmonitor">HealthMonitor</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="api_server_events.html">API server events</a></span><ul><li tabindex="2"><span class="file"><a href="api_server_events.html#_nsdb_network_state_database">NSDB (Network State Database)</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="midolman_events.html">MidoNet Agent events</a></span><ul><li tabindex="2"><span class="file"><a href="midolman_events.html#_nsdb">NSDB</a></span></li><li tabindex="2"><span class="file"><a href="midolman_events.html#_interface">Interface</a></span></li><li tabindex="2"><span class="file"><a href="midolman_events.html#_service">Service</a></span></li></ul></li></ul></li></ul></li><li tabindex="2"><span class="file"><a href="packet_tracing.html">Packet Tracing</a></span><ul><li tabindex="2"><span class="file"><a href="packet_tracing.html#_usage">Usage</a></span></li><li tabindex="2"><span class="file"><a href="packet_tracing.html#_example">Example</a></span></li></ul></li></ul></li><li tabindex="2"><span class="file"><a href="vxlan_configuration.html">14. VXLAN configuration</a></span><ul><li tabindex="2"><span class="file"><a href="vxlan_gateway.html">VXLAN Gateway</a></span></li><li tabindex="2"><span class="file"><a href="vxlan_coordinator.html">VXLAN Coordinator</a></span></li><li tabindex="2"><span class="file"><a href="connect_to_vtep.html">Connecting to the VTEP</a></span></li><li tabindex="2"><span class="file"><a href="connect_vtep_to_neutron.html">Setting up a connection between a VTEP and a Neutron network</a></span></li><li tabindex="2"><span class="file"><a href="connect_vtep_to_midonet.html">Enabling connection between VTEP and MidoNet hosts</a></span></li><li tabindex="2" id="webhelp-currentid"><span class="file"><a href="vxgw_troubleshooting.html">Troubleshooting VTEP/VXGW configuration</a></span></li><li tabindex="2"><span class="file"><a href="vxlan_cli_commands.html">CLI commands used for working with the VXGW</a></span><ul><li tabindex="2"><span class="file"><a href="cli_list_vteps.html">Obtaining a list of VTEPs</a></span></li><li tabindex="2"><span class="file"><a href="cli_add_vtep.html">Adding a VTEP</a></span></li><li tabindex="2"><span class="file"><a href="cli_show_vtep.html">Obtaining information about a VTEP</a></span></li><li tabindex="2"><span class="file"><a href="cli_add_vtep_binding.html">Adding a VTEP binding</a></span></li><li tabindex="2"><span class="file"><a href="cli_list_vtep_bindings.html">Obtaining descriptions of VTEP bindings</a></span></li><li tabindex="2"><span class="file"><a href="cli_remove_vtep_binding.html">Removing a VTEP binding</a></span></li><li tabindex="2"><span class="file"><a href="cli_delete_vtep.html">Deleting a VTEP</a></span></li></ul></li></ul></li><li tabindex="2"><span class="file"><a href="l2_gateway.html">15. Setting up an L2 gateway</a></span><ul><li tabindex="2"><span class="file"><a href="l2_gateway_configuration.html">Configuring an L2 gateway</a></span></li><li tabindex="2"><span class="file"><a href="l2_gateway_failover.html">Fail-over/Fail-back</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="mn_cli.html">16. Working with the MidoNet CLI</a></span><ul><li tabindex="2"><span class="file"><a href="mn_cli_usage.html">Using the MidoNet CLI</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="advanced_configuration_and_concepts.html">17. Advanced configuration and concepts</a></span><ul><li tabindex="2"><span class="file"><a href="midonet_config.html">MidoNet Configuration: mn-conf(1)</a></span><ul><li tabindex="2"><span class="file"><a href="_bootstrapping.html">Bootstrapping</a></span></li><li tabindex="2"><span class="file"><a href="_configuration_sources.html">Configuration sources</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="recommended_configurations.html">Recommended configurations</a></span><ul><li tabindex="2"><span class="file"><a href="recommended_configurations.html#_overview_of_performance_impacting_configuration_options">Overview of Performance-Impacting Configuration Options</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="midolman_configuration_options.html">MidoNet Agent (Midolman) configuration options</a></span><ul><li tabindex="2"><span class="file"><a href="midolman_configuration_options.html#_midonet_behavior_after_zookeeper_cluster_failure">MidoNet behavior after ZooKeeper cluster failure</a></span></li><li tabindex="2"><span class="file"><a href="midolman_configuration_options.html#_zookeeper_configuration">ZooKeeper configuration</a></span></li><li tabindex="2"><span class="file"><a href="midolman_configuration_options.html#_cassandra_configuration">Cassandra configuration</a></span></li><li tabindex="2"><span class="file"><a href="midolman_configuration_options.html#_midonet_agent_datapath_configuration">MidoNet Agent datapath configuration</a></span></li><li tabindex="2"><span class="file"><a href="midolman_configuration_options.html#_bgp_failover_configuration">BGP failover configuration</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="appi_configuration_options.html">Advanced MidoNet API configuration options</a></span><ul><li tabindex="2"><span class="file"><a href="appi_configuration_options.html#_rest_api_base_uri">rest_api-base_uri</a></span></li><li tabindex="2"><span class="file"><a href="appi_configuration_options.html#_cors_access_control_allow_origin">cors-access_control_allow_origin</a></span></li><li tabindex="2"><span class="file"><a href="appi_configuration_options.html#_cors_access_control_allow_headers">cors-access_control_allow_headers</a></span></li><li tabindex="2"><span class="file"><a href="appi_configuration_options.html#_cors_access_control_allow_methods">cors-access_control_allow_methods</a></span></li><li tabindex="2"><span class="file"><a href="appi_configuration_options.html#_cors_access_control_expose_headers">cors-access_control_expose_headers</a></span></li><li tabindex="2"><span class="file"><a href="appi_configuration_options.html#_auth_tenant_admin_role">auth-tenant_admin_role</a></span></li><li tabindex="2"><span class="file"><a href="appi_configuration_options.html#_auth_tenant_user_role">auth-tenant_user_role</a></span></li><li tabindex="2"><span class="file"><a href="appi_configuration_options.html#_zookeeper_use_mock">zookeeper-use_mock</a></span></li><li tabindex="2"><span class="file"><a href="appi_configuration_options.html#_zookeeper_midolman_root_key">zookeeper-midolman_root_key</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="cassandra_cache.html">Cassandra cache</a></span><ul><li tabindex="2"><span class="file"><a href="midolman_behavior_on_cassandra_failure.html">Agent behavior on node failure</a></span></li><li tabindex="2"><span class="file"><a href="nsdb_connectivity.html">Network State Database connectivity</a></span><ul><li tabindex="2"><span class="file"><a href="nsdb_connectivity.html#_zookeeper_zookeeper_hosts">zookeeper-zookeeper_hosts</a></span></li><li tabindex="2"><span class="file"><a href="nsdb_connectivity.html#_zookeeper_session_timeout">zookeeper-session_timeout</a></span></li></ul></li></ul></li><li tabindex="2"><span class="file"><a href="improve_tomcat_startup.html">Improving Tomcat startup time</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="service_ports.html">18. MidoNet and OpenStack TCP/UDP service ports</a></span><ul><li tabindex="2"><span class="file"><a href="controller_node_services.html">Services on the Controller node</a></span></li><li tabindex="2"><span class="file"><a href="nsdb_node_services.html">Services on the Network State Database nodes</a></span></li><li tabindex="2"><span class="file"><a href="compute_node_services.html">Services on the Compute nodes</a></span></li><li tabindex="2"><span class="file"><a href="gateway_node_services.html">Services on the Gateway Nodes</a></span></li></ul></li></ul></div></div><div id="searchDiv"><div id="search"><form onsubmit="Verifie(ditaSearch_Form);return false" name="ditaSearch_Form" class="searchForm"><fieldset class="searchFieldSet"><legend>Search</legend><center><input id="textToSearch" name="textToSearch" type="text" class="searchText"/> &nbsp; <input onclick="Verifie(ditaSearch_Form)" type="button" class="searchButton" value="Go" id="doSearch"/></center></fieldset></form></div><div id="searchResults"><center/></div><p class="searchHighlight"><a href="#" onclick="toggleHighlight()">Search Highlighter (On/Off)</a></p></div></div></div></div></body></html>